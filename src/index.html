<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet"
      href="../node_modules/bootstrap/dist/css/bootstrap.min.css">
    <title>Ziggy Mailer</title>
    <meta name="description" content="Automate e-mail postings for an online
      debate tournament." />
  </head>
  <body>

    <div class="container p-5">
      <h1>Ziggy Mailer</h1>
      <form>

        <div class="row">
          <div class="form-group col-sm-6">
            <label for="from">From</label>
            <input type="text" id="from" class="form-control" />
          </div>
          <div class="form-group col-sm-6">
            <label for="reply-to">Reply to</label>
            <input type="text" id="reply-to" class="form-control" />
          </div>
        </div>

        <div class="form-group">
          <label for="subject">Subject</label>
          <input type="text" id="subject" class="form-control" />
        </div>

        <div class="form-group">
          <label for="message-body">Body</label>
          <textarea id="message-body" rows="8" class="form-control" />
          </div>

          <div class="row">

            <div class="form-group col-sm-4">
              <label for="round-number">Round Number</label>
              <input type="number" id="round-number" class="form-control" />
            </div>

            <div class="form-group col-sm-4">
              <label for="round-file">Round File</label>
              <input type="file" id="round-file" class="form-control" />
            </div>

            <div class="form-group col-sm-4">
              <label for="team-file">Team File</label>
              <input type="file" id="team-file" class="form-control" />
            </div>

          </div>

          <button type="submit" class="btn btn-primary btn-block" disabled>Send
            Emails</button>
        </form>
      </div> <!-- .container -->

      <!-- API Key Modal -->
      <div class="modal fade" tabindex="-1" role="dialog"
        id="settings">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Settings</h5>
              <button type="button" class="close" data-dismiss="modal"
                aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <div class="form-group">
                <label for="sendgrid-key">Sendgrid API Key</label>
                <input id="zd-settings-sendgrid-key" class="form-control" />
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-link"
                data-dismiss="modal">Cancel</button>
              <button type="button" class="btn btn-primary"
                onclick="$('#settings').trigger('zd.settings.save')">Set Key</button>
            </div>
          </div>
        </div>
      </div>

    </body>

    <!-- import jQuery and Bootstrap -->
    <script type="text/javascript">
      window.$ = window.jQuery = require('jquery');
      require('bootstrap');
    </script>

    <!-- main -->
    <script type="text/javascript">
      $(document).ready(() => {
        $('#settings')
          .modal('show')
          .on('zd.settings.save', () => {
            const key = $('#zd-settings-sendgrid-key').val();
            if(key) {
              alert(key);
            }
          })
      });
    </script>



  </html>
